{"ast":null,"code":"var _jsxFileName = \"C:\\\\SourceTree\\\\capstone-project\\\\src\\\\NetworkTopology.js\",\n    _s = $RefreshSig$();\n\nimport \"antd/dist/antd.css\";\nimport React, { useState, useRef, useCallback, useEffect } from \"react\";\nimport { Layout, Button, Affix } from \"antd\";\nimport { ForceGraph3D } from \"react-force-graph\";\nimport DeviceDrawer from \"./Components/DrawerDevice\";\nimport NetworkDrawer from \"./Components/DrawerNetwork\";\nimport * as THREE from \"three\";\nimport networkData from \"./Components/Data/network.json\";\nimport device_data from \"./Components/Data/device_data.json\";\nimport relation_data from \"./Components/Data/relation_data.json\"; // const ForceGraphComponent = React.memo((props) => {console.log(\"Child rendered\"); // For verification purposes\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AppNetworkTopology() {\n  _s();\n\n  const [deviceDrawerStatus, setDeviceDrawerStatus] = useState(false);\n  const [networkDrawerStatus, setNetworkDrawerStatus] = useState(false); // networkDrawerStatus={this.state.networkDrawerStatus}\n\n  const [deviceDetails, setDeviceDetails] = useState({});\n  const [networkDetails, setNetworkDetails] = useState({});\n  const [groupByDevice, setGroupByDevice] = useState();\n  const [deviceCounter, setDeviceCounter] = useState();\n  const [hoverNode, setHoverNode] = useState();\n  const [alertData, setAlertData] = useState([]);\n  const [temp, setTemp] = useState(0);\n  useEffect(() => {\n    setIterval(() => {\n      setTemp(prevTemp => prevTemp + 1);\n    }, 2000);\n  }, []);\n  useEffect(() => {\n    getData();\n  }, [temp]); // GetData\n\n  const getData = async () => {\n    await fetch(\"http://localhost:3001/alerts\").then(response => response.json()).then(data => setAlertData(data)).catch(err => console.log(err));\n    console.log(alertData);\n  };\n\n  console.log(alertData);\n\n  const closeDeviceDrawer = () => {\n    setDeviceDrawerStatus(false);\n  };\n\n  const closeNetworkDrawer = () => {\n    setNetworkDrawerStatus(false);\n  };\n\n  const handleNetworkStatisticsButton = () => {\n    setDeviceDrawerStatus(false);\n    setNetworkDrawerStatus(true);\n    setNetworkDetails(networkData[0]);\n    setDeviceCounter(device_data.length);\n    setGroupByDevice(groupByDeviceType());\n  }; // const groupByDeviceType = device_data.reduce((thisData, dev) => {\n  //   thisData[dev.status] = thisData[dev.status] + 1 || 1;\n  //   return thisData;\n  // }, {});\n\n\n  const groupByDeviceType = () => {\n    var result = {};\n\n    for (var i = 0; i < device_data.length; i++) {\n      if (!result[device_data[i][\"status\"]]) {\n        result[device_data[i][\"status\"]] = 0;\n      }\n\n      result[device_data[i][\"status\"]]++;\n    }\n\n    return result;\n  };\n\n  const fgRef = useRef();\n  const zoomInNode = useCallback(node => {\n    setDeviceDrawerStatus(true);\n    setNetworkDrawerStatus(false);\n    setDeviceDetails(node);\n    setHoverNode(node); // Camera distance of node\n\n    const distance = 150;\n    const distRatio = 1 + distance / Math.hypot(node.x, node.y, node.z);\n    fgRef.current.cameraPosition({\n      x: node.x * distRatio,\n      y: node.y * distRatio,\n      z: node.z * distRatio\n    }, // new position\n    node, // lookAt ({ x, y, z })\n    1000 // ms transition duration\n    );\n  }, [fgRef]);\n  var this_array = [];\n\n  const handleNodeHover = node => {\n    this_array = [];\n\n    if (node) {\n      console.log(node);\n\n      for (var i = 0; i < relation_data.length; i++) {\n        if (relation_data[i].source.id === node.id) {\n          this_array.push(relation_data[i].target.id);\n        } else if (relation_data[i].target.id === node.id) {\n          this_array.push(relation_data[i].source.id);\n        }\n      }\n\n      console.log(this_array);\n    } else {// console.log(\"Nothing\");\n    }\n  };\n\n  const paintRing = useCallback(node => {\n    let imgTexture = null;\n    this_array = [];\n\n    if (hoverNode) {\n      for (var i = 0; i < relation_data.length; i++) {\n        if (relation_data[i].source.id === hoverNode.id) {\n          this_array.push(relation_data[i].target.id);\n        } else if (relation_data[i].target.id === hoverNode.id) {\n          this_array.push(relation_data[i].source.id);\n        }\n      }\n    } else {\n      imgTexture = new THREE.TextureLoader().load(\"assets/check.png\");\n    }\n\n    imgTexture = new THREE.TextureLoader().load(\"assets/check.png\");\n\n    if (node === hoverNode) {\n      console.log(\"Hello\", node);\n\n      for (var i = 0; i < relation_data.length; i++) {\n        if (relation_data[i].source.id === node.id) {\n          this_array.push(relation_data[i].target.id);\n        } else if (relation_data[i].target.id === node.id) {\n          this_array.push(relation_data[i].source.id);\n        }\n      }\n\n      console.log(\"Connected to\", this_array);\n      console.log(\"============================================\");\n      imgTexture = new THREE.TextureLoader().load(\"assets/check.png\");\n    } else {\n      if (node.type === \"DB\") {\n        if (node.status === \"Active\") {\n          imgTexture = new THREE.TextureLoader().load(\"assets/online_db.png\");\n        } else if (node.status === \"Inactive\") {\n          imgTexture = new THREE.TextureLoader().load(\"assets/inactive_db.png\");\n        } else {\n          imgTexture = new THREE.TextureLoader().load(\"assets/offline_db.png\");\n        }\n      } else if (node.type === \"PC\") {\n        if (node.status === \"Active\") {\n          imgTexture = new THREE.TextureLoader().load(\"assets/online_pc.png\");\n        } else if (node.status === \"Inactive\") {\n          imgTexture = new THREE.TextureLoader().load(\"assets/inactive_pc.png\");\n        } else {\n          imgTexture = new THREE.TextureLoader().load(\"assets/offline_pc.png\");\n        }\n      } else if (node.type === \"Router\") {\n        if (node.status === \"Active\") {\n          imgTexture = new THREE.TextureLoader().load(\"assets/online_router.png\");\n        } else if (node.status === \"Inactive\") {\n          imgTexture = new THREE.TextureLoader().load(\"assets/inactive_router.png\");\n        } else {\n          imgTexture = new THREE.TextureLoader().load(\"assets/offline_router.png\");\n        }\n      }\n    }\n\n    const material = new THREE.SpriteMaterial({\n      map: imgTexture\n    });\n    const sprite = new THREE.Sprite(material);\n    sprite.scale.set(12, 12);\n    return sprite;\n  }); // <Layout style={{ marginLeft: 199, zIndex: -1 }}>\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(ForceGraph3D, {\n        width: window.innerWidth,\n        height: window.innerHeight - 1,\n        ref: fgRef,\n        graphData: {\n          nodes: device_data,\n          links: relation_data\n        },\n        nodeLabel: node => `<div style=\"background: #1F1E26; padding: 5px 10px 8px 10px; border-radius: 10px; user-select: none\">\n            <span>Name: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>${node.name}</b></span><br/>\n            <span>IP Addr: &nbsp;&nbsp;&nbsp;&nbsp;<b>${node.id}</b></span><br/>\n            <span>Mac Addr: &nbsp;<b>${node.mac_addr}</b></span>\n            </div>`,\n        linkWidth: 1,\n        onNodeRightClick: zoomInNode,\n        linkDirectionalParticles: 1,\n        linkDirectionalParticleSpeed: 0.01,\n        onNodeHover: handleNodeHover // onNodeHover={handleHover}\n        // onNodeDragEnd={(node) => {\n        //   node.fx = node.x;\n        //   node.fy = node.y;\n        //   node.fz = node.z;\n        // }}\n        ,\n        nodeThreeObject: paintRing\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Affix, {\n      style: {\n        position: \"absolute\",\n        top: 120,\n        left: 10,\n        zIndex: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: handleNetworkStatisticsButton,\n        children: \"Show Network Statistics\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DeviceDrawer, {\n      deviceDrawerStatus: deviceDrawerStatus,\n      deviceDetails: deviceDetails,\n      closeDeviceDrawer: closeDeviceDrawer,\n      alertData: alertData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NetworkDrawer, {\n      networkDrawerStatus: networkDrawerStatus,\n      networkDetails: networkDetails,\n      groupByDevice: groupByDevice,\n      deviceCounter: deviceCounter,\n      closeNetworkDrawer: closeNetworkDrawer,\n      alertData: alertData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AppNetworkTopology, \"4Fp67VjXo/1ibvmN7ry0M3axF7s=\");\n\n_c = AppNetworkTopology;\nexport default AppNetworkTopology; // const groupByDeviceType = device_data.reduce((thisData, dev) => {\n//   thisData[dev.status] = thisData[dev.status] + 1 || 1;\n//   return thisData;\n// }, {});\n// function FocusGraph() {\n//   const fgRef = React.useRef;\n//   const handleClick = React.useCallback(\n//     (node) => {\n//       const distance = 40;\n//       const distRatio = 1 + distance / Math.hypot(node.x, node.y, node.z);\n//       fgRef.current.cameraPosition(\n//         { x: node.x * distRatio, y: node.y * distRatio, z: node.z * distRatio }, // new position\n//         node, // lookAt ({ x, y, z })\n//         3000 // camera transition duration (in ms)\n//       );\n//     },\n//     [fgRef]\n//   );\n// }\n// // ForceGraphComponent with React.memo implementation (Prevents unnecessary re-rendering)\n// const ForceGraphComponent = React.memo((props) => {\n//   console.log(\"Child rendered\"); // For verification purposes\n//   console.log(device_data);\n//   // Layout to add margin left to the Networok Topology Graph\n//   return (\n//     <Layout style={{ marginLeft: 199 }}>\n//       <ForceGraph3D\n//         width={window.innerWidth - 200}\n//         graphData={{\n//           nodes: device_data,\n//           links: relation_data,\n//         }}\n//         onNodeRightClick={props.handleRightClick}\n//         // linkDirectionalParticles={1}\n//         // linkDirectionalParticleSpeed={0.01}\n//         onNodeHover={props.handleHover}\n//         onNodeDragEnd={(node) => {\n//           node.fx = node.x;\n//           node.fy = node.y;\n//           node.fz = node.z;\n//         }}\n//         nodeThreeObject={({ type }) => {\n//           let imgTexture = null;\n//           if (type === \"DB\") {\n//             imgTexture = new THREE.TextureLoader().load(\"assets/img_db.png\");\n//           } else if (type === \"PC\") {\n//             imgTexture = new THREE.TextureLoader().load(\"assets/img_pc.png\");\n//           } else if (type === \"Router\") {\n//             imgTexture = new THREE.TextureLoader().load(\n//               \"assets/img_router.png\"\n//             );\n//           }\n//           const material = new THREE.SpriteMaterial({ map: imgTexture });\n//           const sprite = new THREE.Sprite(material);\n//           sprite.scale.set(12, 12);\n//           return sprite;\n//         }}\n//       />\n//     </Layout>\n//   );\n// });\n// export default class AppNetworkTopology extends React.Component {\n//   // Initial state\n//   state = {\n//     deviceDrawerStatus: false,\n//     networkDrawerStatus: false,\n//     deviceDetailsObject: {},\n//     networkDetailObject: networkData[0],\n//     networkStatisticsObject: groupByDeviceType,\n//     networkDeviceCounter: device_data.length,\n//   };\n//   // shouldComponentUpdate = (nextProps, nextState) => {\n//   //   console.log(nextProps);\n//   //   console.log(nextState);\n//   //   return false;\n//   // };\n//   // On right-click on icon on network topology, the function will pass the object to handleRightClick()\n//   // This function wil then set the state of \"deviceDrawerStatus\" to \"true\"\n//   // This function will also set the state of \"networkDrawerStatus\" to false\n//   handleRightClick = (node) => {\n//     this.setState({\n//       deviceDetailsObject: node,\n//       deviceDrawerStatus: true,\n//       networkDrawerStatus: false,\n//     });\n//   };\n//   handleHover = (node) => {\n//     // console.log(this.state.deviceDetailsObject);\n//     if (node != null && node != this.state.deviceDetailsObject) {\n//       this.setState({\n//         deviceDetailsObject: node,\n//       });\n//     }\n//   };\n//   // This function set the state of \"networkDrawerStatus\" will be \"true\"\n//   // This function will also set the state of \"deviceDrawerStatus\" to false\n//   // This function will only be invoked when the \"Show Network Statistics\" button is pressed\n//   handleNetworkStatistcsButton = () => {\n//     this.setState({\n//       networkDrawerStatus: true,\n//       deviceDrawerStatus: false,\n//     });\n//   };\n//   // This function sets the state of \"deviceDrawerStatus\" to \"false\"\n//   // This funtion is passed to the child component \"DeviceDrawer\"\n//   // When clicking on the \"X\" symbol in \"DeviceDrawer\", this function will run\n//   closeDeviceDrawer = () => {\n//     this.setState({ deviceDrawerStatus: false });\n//   };\n//   // This function sets the state of \"networkDrawerStatus\" to \"false\"\n//   // This funtion is passed to the child component \"NetworkDrawer\"\n//   // When clicking on the \"X\" symbol in \"NetworkDrawer\", this function will run\n//   closeNetworkDrawer = () => {\n//     this.setState({ networkDrawerStatus: false });\n//   };\n//   render() {\n//     return (\n//       <div>\n//         <div\n//           id=\"tester\"\n//           style={{\n//             padding: 10,\n//             position: \"absolute\",\n//             top: 10,\n//             left: 210,\n//             zIndex: 1,\n//             background: \"white\",\n//             height: 200,\n//             width: 200,\n//           }}\n//         >\n//           <p>IP: {this.state.deviceDetailsObject.id}</p>\n//           <p>Name: {this.state.deviceDetailsObject.name}</p>\n//           <p>Type: {this.state.deviceDetailsObject.type}</p>\n//           <p>OS: {this.state.deviceDetailsObject.os}</p>\n//           <p>Mac: {this.state.deviceDetailsObject.mac_addr}</p>\n//         </div>\n//         <Affix style={{ position: \"absolute\", top: 120, left: 10 }}>\n//           <Button type=\"primary\" onClick={this.handleNetworkStatistcsButton}>\n//             Show Network Statistics\n//           </Button>\n//         </Affix>\n//         <NetworkDrawer\n//           networkDetailObject={this.state.networkDetailObject}\n//           networkDrawerStatus={this.state.networkDrawerStatus}\n//           networkStatisticsObject={this.state.networkStatisticsObject}\n//           networkDeviceCounter={this.state.networkDeviceCounter}\n//           closeNetworkDrawerFunction={this.closeNetworkDrawer}\n//         />\n//         <DeviceDrawer\n//           deviceDetails={this.state.deviceDetailsObject}\n//           deviceDrawerStatus={this.state.deviceDrawerStatus}\n//           closeDeviceDrawerFunction={this.closeDeviceDrawer}\n//         />\n//         <ForceGraphComponent\n//           style={{ zIndex: -1 }}\n//           handleRightClick={this.handleRightClick}\n//           handleHover={this.handleHover}\n//           handleClick={this.FocusGraph}\n//         />\n//       </div>\n//     );\n//   }\n// }\n// handleClick = (node) => {\n//   const getHostName = testingData.filter((thisDevice) =>\n//     thisDevice.id.includes(node.id)\n//   );\n//   getHostName.map((deviceDetails) => {\n//     // alert(deviceDetails.os);\n//     this.setState({ deviceDetailsObject: deviceDetails });\n//   });\n// };\n\nvar _c;\n\n$RefreshReg$(_c, \"AppNetworkTopology\");","map":{"version":3,"sources":["C:/SourceTree/capstone-project/src/NetworkTopology.js"],"names":["React","useState","useRef","useCallback","useEffect","Layout","Button","Affix","ForceGraph3D","DeviceDrawer","NetworkDrawer","THREE","networkData","device_data","relation_data","AppNetworkTopology","deviceDrawerStatus","setDeviceDrawerStatus","networkDrawerStatus","setNetworkDrawerStatus","deviceDetails","setDeviceDetails","networkDetails","setNetworkDetails","groupByDevice","setGroupByDevice","deviceCounter","setDeviceCounter","hoverNode","setHoverNode","alertData","setAlertData","temp","setTemp","setIterval","prevTemp","getData","fetch","then","response","json","data","catch","err","console","log","closeDeviceDrawer","closeNetworkDrawer","handleNetworkStatisticsButton","length","groupByDeviceType","result","i","fgRef","zoomInNode","node","distance","distRatio","Math","hypot","x","y","z","current","cameraPosition","this_array","handleNodeHover","source","id","push","target","paintRing","imgTexture","TextureLoader","load","type","status","material","SpriteMaterial","map","sprite","Sprite","scale","set","window","innerWidth","innerHeight","nodes","links","name","mac_addr","position","top","left","zIndex"],"mappings":"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;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import \"antd/dist/antd.css\";\r\nimport React, { useState, useRef, useCallback, useEffect } from \"react\";\r\nimport { Layout, Button, Affix } from \"antd\";\r\nimport { ForceGraph3D } from \"react-force-graph\";\r\nimport DeviceDrawer from \"./Components/DrawerDevice\";\r\nimport NetworkDrawer from \"./Components/DrawerNetwork\";\r\nimport * as THREE from \"three\";\r\nimport networkData from \"./Components/Data/network.json\";\r\nimport device_data from \"./Components/Data/device_data.json\";\r\nimport relation_data from \"./Components/Data/relation_data.json\";\r\n\r\n// const ForceGraphComponent = React.memo((props) => {console.log(\"Child rendered\"); // For verification purposes\r\n\r\nfunction AppNetworkTopology() {\r\n  const [deviceDrawerStatus, setDeviceDrawerStatus] = useState(false);\r\n  const [networkDrawerStatus, setNetworkDrawerStatus] = useState(false); // networkDrawerStatus={this.state.networkDrawerStatus}\r\n  const [deviceDetails, setDeviceDetails] = useState({});\r\n  const [networkDetails, setNetworkDetails] = useState({});\r\n  const [groupByDevice, setGroupByDevice] = useState();\r\n  const [deviceCounter, setDeviceCounter] = useState();\r\n  const [hoverNode, setHoverNode] = useState();\r\n\r\n  const [alertData, setAlertData] = useState([]);\r\n  const [temp, setTemp] = useState(0);\r\n\r\n  useEffect(() => {\r\n    setIterval(() => {\r\n      setTemp((prevTemp) => prevTemp + 1);\r\n    }, 2000);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [temp]);\r\n\r\n  // GetData\r\n  const getData = async () => {\r\n    await fetch(\"http://localhost:3001/alerts\")\r\n      .then((response) => response.json())\r\n      .then((data) => setAlertData(data))\r\n      .catch((err) => console.log(err));\r\n    console.log(alertData);\r\n  };\r\n\r\n  console.log(alertData);\r\n\r\n  const closeDeviceDrawer = () => {\r\n    setDeviceDrawerStatus(false);\r\n  };\r\n\r\n  const closeNetworkDrawer = () => {\r\n    setNetworkDrawerStatus(false);\r\n  };\r\n\r\n  const handleNetworkStatisticsButton = () => {\r\n    setDeviceDrawerStatus(false);\r\n    setNetworkDrawerStatus(true);\r\n    setNetworkDetails(networkData[0]);\r\n    setDeviceCounter(device_data.length);\r\n    setGroupByDevice(groupByDeviceType());\r\n  };\r\n\r\n  // const groupByDeviceType = device_data.reduce((thisData, dev) => {\r\n  //   thisData[dev.status] = thisData[dev.status] + 1 || 1;\r\n  //   return thisData;\r\n  // }, {});\r\n\r\n  const groupByDeviceType = () => {\r\n    var result = {};\r\n    for (var i = 0; i < device_data.length; i++) {\r\n      if (!result[device_data[i][\"status\"]]) {\r\n        result[device_data[i][\"status\"]] = 0;\r\n      }\r\n      result[device_data[i][\"status\"]]++;\r\n    }\r\n    return result;\r\n  };\r\n\r\n  const fgRef = useRef();\r\n  const zoomInNode = useCallback(\r\n    (node) => {\r\n      setDeviceDrawerStatus(true);\r\n      setNetworkDrawerStatus(false);\r\n      setDeviceDetails(node);\r\n      setHoverNode(node);\r\n\r\n      // Camera distance of node\r\n      const distance = 150;\r\n      const distRatio = 1 + distance / Math.hypot(node.x, node.y, node.z);\r\n\r\n      fgRef.current.cameraPosition(\r\n        {\r\n          x: node.x * distRatio,\r\n          y: node.y * distRatio,\r\n          z: node.z * distRatio,\r\n        }, // new position\r\n        node, // lookAt ({ x, y, z })\r\n        1000 // ms transition duration\r\n      );\r\n    },\r\n    [fgRef]\r\n  );\r\n\r\n  var this_array = [];\r\n\r\n  const handleNodeHover = (node) => {\r\n    this_array = [];\r\n    if (node) {\r\n      console.log(node);\r\n      for (var i = 0; i < relation_data.length; i++) {\r\n        if (relation_data[i].source.id === node.id) {\r\n          this_array.push(relation_data[i].target.id);\r\n        } else if (relation_data[i].target.id === node.id) {\r\n          this_array.push(relation_data[i].source.id);\r\n        }\r\n      }\r\n      console.log(this_array);\r\n    } else {\r\n      // console.log(\"Nothing\");\r\n    }\r\n  };\r\n\r\n  const paintRing = useCallback((node) => {\r\n    let imgTexture = null;\r\n    this_array = [];\r\n\r\n    if (hoverNode) {\r\n      for (var i = 0; i < relation_data.length; i++) {\r\n        if (relation_data[i].source.id === hoverNode.id) {\r\n          this_array.push(relation_data[i].target.id);\r\n        } else if (relation_data[i].target.id === hoverNode.id) {\r\n          this_array.push(relation_data[i].source.id);\r\n        }\r\n      }\r\n    } else {\r\n      imgTexture = new THREE.TextureLoader().load(\"assets/check.png\");\r\n    }\r\n\r\n    imgTexture = new THREE.TextureLoader().load(\"assets/check.png\");\r\n\r\n    if (node === hoverNode) {\r\n      console.log(\"Hello\", node);\r\n\r\n      for (var i = 0; i < relation_data.length; i++) {\r\n        if (relation_data[i].source.id === node.id) {\r\n          this_array.push(relation_data[i].target.id);\r\n        } else if (relation_data[i].target.id === node.id) {\r\n          this_array.push(relation_data[i].source.id);\r\n        }\r\n      }\r\n      console.log(\"Connected to\", this_array);\r\n      console.log(\"============================================\");\r\n\r\n      imgTexture = new THREE.TextureLoader().load(\"assets/check.png\");\r\n    } else {\r\n      if (node.type === \"DB\") {\r\n        if (node.status === \"Active\") {\r\n          imgTexture = new THREE.TextureLoader().load(\"assets/online_db.png\");\r\n        } else if (node.status === \"Inactive\") {\r\n          imgTexture = new THREE.TextureLoader().load(\"assets/inactive_db.png\");\r\n        } else {\r\n          imgTexture = new THREE.TextureLoader().load(\"assets/offline_db.png\");\r\n        }\r\n      } else if (node.type === \"PC\") {\r\n        if (node.status === \"Active\") {\r\n          imgTexture = new THREE.TextureLoader().load(\"assets/online_pc.png\");\r\n        } else if (node.status === \"Inactive\") {\r\n          imgTexture = new THREE.TextureLoader().load(\"assets/inactive_pc.png\");\r\n        } else {\r\n          imgTexture = new THREE.TextureLoader().load(\"assets/offline_pc.png\");\r\n        }\r\n      } else if (node.type === \"Router\") {\r\n        if (node.status === \"Active\") {\r\n          imgTexture = new THREE.TextureLoader().load(\r\n            \"assets/online_router.png\"\r\n          );\r\n        } else if (node.status === \"Inactive\") {\r\n          imgTexture = new THREE.TextureLoader().load(\r\n            \"assets/inactive_router.png\"\r\n          );\r\n        } else {\r\n          imgTexture = new THREE.TextureLoader().load(\r\n            \"assets/offline_router.png\"\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    const material = new THREE.SpriteMaterial({ map: imgTexture });\r\n    const sprite = new THREE.Sprite(material);\r\n    sprite.scale.set(12, 12);\r\n\r\n    return sprite;\r\n  });\r\n\r\n  // <Layout style={{ marginLeft: 199, zIndex: -1 }}>\r\n\r\n  return (\r\n    <div>\r\n      <Layout>\r\n        <ForceGraph3D\r\n          width={window.innerWidth}\r\n          height={window.innerHeight - 1}\r\n          ref={fgRef}\r\n          graphData={{\r\n            nodes: device_data,\r\n            links: relation_data,\r\n          }}\r\n          nodeLabel={(node) =>\r\n            `<div style=\"background: #1F1E26; padding: 5px 10px 8px 10px; border-radius: 10px; user-select: none\">\r\n            <span>Name: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>${node.name}</b></span><br/>\r\n            <span>IP Addr: &nbsp;&nbsp;&nbsp;&nbsp;<b>${node.id}</b></span><br/>\r\n            <span>Mac Addr: &nbsp;<b>${node.mac_addr}</b></span>\r\n            </div>`\r\n          }\r\n          linkWidth={1}\r\n          onNodeRightClick={zoomInNode}\r\n          linkDirectionalParticles={1}\r\n          linkDirectionalParticleSpeed={0.01}\r\n          onNodeHover={handleNodeHover}\r\n          // onNodeHover={handleHover}\r\n          // onNodeDragEnd={(node) => {\r\n          //   node.fx = node.x;\r\n          //   node.fy = node.y;\r\n          //   node.fz = node.z;\r\n          // }}\r\n          nodeThreeObject={paintRing}\r\n        />\r\n      </Layout>\r\n      <Affix style={{ position: \"absolute\", top: 120, left: 10, zIndex: 1 }}>\r\n        <Button type=\"primary\" onClick={handleNetworkStatisticsButton}>\r\n          Show Network Statistics\r\n        </Button>\r\n      </Affix>\r\n\r\n      <DeviceDrawer\r\n        deviceDrawerStatus={deviceDrawerStatus}\r\n        deviceDetails={deviceDetails}\r\n        closeDeviceDrawer={closeDeviceDrawer}\r\n        alertData={alertData}\r\n      />\r\n      <NetworkDrawer\r\n        networkDrawerStatus={networkDrawerStatus}\r\n        networkDetails={networkDetails}\r\n        groupByDevice={groupByDevice}\r\n        deviceCounter={deviceCounter}\r\n        closeNetworkDrawer={closeNetworkDrawer}\r\n        alertData={alertData}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AppNetworkTopology;\r\n\r\n// const groupByDeviceType = device_data.reduce((thisData, dev) => {\r\n//   thisData[dev.status] = thisData[dev.status] + 1 || 1;\r\n//   return thisData;\r\n// }, {});\r\n\r\n// function FocusGraph() {\r\n//   const fgRef = React.useRef;\r\n\r\n//   const handleClick = React.useCallback(\r\n//     (node) => {\r\n//       const distance = 40;\r\n//       const distRatio = 1 + distance / Math.hypot(node.x, node.y, node.z);\r\n\r\n//       fgRef.current.cameraPosition(\r\n//         { x: node.x * distRatio, y: node.y * distRatio, z: node.z * distRatio }, // new position\r\n//         node, // lookAt ({ x, y, z })\r\n//         3000 // camera transition duration (in ms)\r\n//       );\r\n//     },\r\n//     [fgRef]\r\n//   );\r\n// }\r\n\r\n// // ForceGraphComponent with React.memo implementation (Prevents unnecessary re-rendering)\r\n// const ForceGraphComponent = React.memo((props) => {\r\n//   console.log(\"Child rendered\"); // For verification purposes\r\n//   console.log(device_data);\r\n\r\n//   // Layout to add margin left to the Networok Topology Graph\r\n//   return (\r\n//     <Layout style={{ marginLeft: 199 }}>\r\n//       <ForceGraph3D\r\n//         width={window.innerWidth - 200}\r\n//         graphData={{\r\n//           nodes: device_data,\r\n//           links: relation_data,\r\n//         }}\r\n//         onNodeRightClick={props.handleRightClick}\r\n//         // linkDirectionalParticles={1}\r\n//         // linkDirectionalParticleSpeed={0.01}\r\n//         onNodeHover={props.handleHover}\r\n//         onNodeDragEnd={(node) => {\r\n//           node.fx = node.x;\r\n//           node.fy = node.y;\r\n//           node.fz = node.z;\r\n//         }}\r\n//         nodeThreeObject={({ type }) => {\r\n//           let imgTexture = null;\r\n//           if (type === \"DB\") {\r\n//             imgTexture = new THREE.TextureLoader().load(\"assets/img_db.png\");\r\n//           } else if (type === \"PC\") {\r\n//             imgTexture = new THREE.TextureLoader().load(\"assets/img_pc.png\");\r\n//           } else if (type === \"Router\") {\r\n//             imgTexture = new THREE.TextureLoader().load(\r\n//               \"assets/img_router.png\"\r\n//             );\r\n//           }\r\n\r\n//           const material = new THREE.SpriteMaterial({ map: imgTexture });\r\n//           const sprite = new THREE.Sprite(material);\r\n//           sprite.scale.set(12, 12);\r\n\r\n//           return sprite;\r\n//         }}\r\n//       />\r\n//     </Layout>\r\n//   );\r\n// });\r\n\r\n// export default class AppNetworkTopology extends React.Component {\r\n//   // Initial state\r\n//   state = {\r\n//     deviceDrawerStatus: false,\r\n//     networkDrawerStatus: false,\r\n//     deviceDetailsObject: {},\r\n//     networkDetailObject: networkData[0],\r\n//     networkStatisticsObject: groupByDeviceType,\r\n//     networkDeviceCounter: device_data.length,\r\n//   };\r\n\r\n//   // shouldComponentUpdate = (nextProps, nextState) => {\r\n//   //   console.log(nextProps);\r\n//   //   console.log(nextState);\r\n//   //   return false;\r\n//   // };\r\n\r\n//   // On right-click on icon on network topology, the function will pass the object to handleRightClick()\r\n//   // This function wil then set the state of \"deviceDrawerStatus\" to \"true\"\r\n//   // This function will also set the state of \"networkDrawerStatus\" to false\r\n//   handleRightClick = (node) => {\r\n//     this.setState({\r\n//       deviceDetailsObject: node,\r\n//       deviceDrawerStatus: true,\r\n//       networkDrawerStatus: false,\r\n//     });\r\n//   };\r\n\r\n//   handleHover = (node) => {\r\n//     // console.log(this.state.deviceDetailsObject);\r\n//     if (node != null && node != this.state.deviceDetailsObject) {\r\n//       this.setState({\r\n//         deviceDetailsObject: node,\r\n//       });\r\n//     }\r\n//   };\r\n\r\n//   // This function set the state of \"networkDrawerStatus\" will be \"true\"\r\n//   // This function will also set the state of \"deviceDrawerStatus\" to false\r\n//   // This function will only be invoked when the \"Show Network Statistics\" button is pressed\r\n//   handleNetworkStatistcsButton = () => {\r\n//     this.setState({\r\n//       networkDrawerStatus: true,\r\n//       deviceDrawerStatus: false,\r\n//     });\r\n//   };\r\n\r\n//   // This function sets the state of \"deviceDrawerStatus\" to \"false\"\r\n//   // This funtion is passed to the child component \"DeviceDrawer\"\r\n//   // When clicking on the \"X\" symbol in \"DeviceDrawer\", this function will run\r\n//   closeDeviceDrawer = () => {\r\n//     this.setState({ deviceDrawerStatus: false });\r\n//   };\r\n\r\n//   // This function sets the state of \"networkDrawerStatus\" to \"false\"\r\n//   // This funtion is passed to the child component \"NetworkDrawer\"\r\n//   // When clicking on the \"X\" symbol in \"NetworkDrawer\", this function will run\r\n//   closeNetworkDrawer = () => {\r\n//     this.setState({ networkDrawerStatus: false });\r\n//   };\r\n\r\n//   render() {\r\n//     return (\r\n//       <div>\r\n//         <div\r\n//           id=\"tester\"\r\n//           style={{\r\n//             padding: 10,\r\n//             position: \"absolute\",\r\n//             top: 10,\r\n//             left: 210,\r\n//             zIndex: 1,\r\n//             background: \"white\",\r\n//             height: 200,\r\n//             width: 200,\r\n//           }}\r\n//         >\r\n//           <p>IP: {this.state.deviceDetailsObject.id}</p>\r\n//           <p>Name: {this.state.deviceDetailsObject.name}</p>\r\n//           <p>Type: {this.state.deviceDetailsObject.type}</p>\r\n//           <p>OS: {this.state.deviceDetailsObject.os}</p>\r\n//           <p>Mac: {this.state.deviceDetailsObject.mac_addr}</p>\r\n//         </div>\r\n//         <Affix style={{ position: \"absolute\", top: 120, left: 10 }}>\r\n//           <Button type=\"primary\" onClick={this.handleNetworkStatistcsButton}>\r\n//             Show Network Statistics\r\n//           </Button>\r\n//         </Affix>\r\n\r\n//         <NetworkDrawer\r\n//           networkDetailObject={this.state.networkDetailObject}\r\n//           networkDrawerStatus={this.state.networkDrawerStatus}\r\n//           networkStatisticsObject={this.state.networkStatisticsObject}\r\n//           networkDeviceCounter={this.state.networkDeviceCounter}\r\n//           closeNetworkDrawerFunction={this.closeNetworkDrawer}\r\n//         />\r\n//         <DeviceDrawer\r\n//           deviceDetails={this.state.deviceDetailsObject}\r\n//           deviceDrawerStatus={this.state.deviceDrawerStatus}\r\n//           closeDeviceDrawerFunction={this.closeDeviceDrawer}\r\n//         />\r\n//         <ForceGraphComponent\r\n//           style={{ zIndex: -1 }}\r\n//           handleRightClick={this.handleRightClick}\r\n//           handleHover={this.handleHover}\r\n//           handleClick={this.FocusGraph}\r\n//         />\r\n//       </div>\r\n//     );\r\n//   }\r\n// }\r\n\r\n// handleClick = (node) => {\r\n//   const getHostName = testingData.filter((thisDevice) =>\r\n//     thisDevice.id.includes(node.id)\r\n//   );\r\n//   getHostName.map((deviceDetails) => {\r\n//     // alert(deviceDetails.os);\r\n//     this.setState({ deviceDetailsObject: deviceDetails });\r\n//   });\r\n// };\r\n"]},"metadata":{},"sourceType":"module"}